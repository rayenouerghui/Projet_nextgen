<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Code Master - The Game</title>
<style>
  body { margin:0; background:linear-gradient(#0a0033,#000); color:#0ff; font-family:'Courier New',sans-serif; text-align:center; overflow:hidden; }
  canvas { position:fixed; top:0; left:0; z-index:-1; }
  #game { padding:20px; }
  h1 { font-size:60px; text-shadow:0 0 30px #0ff; margin:20px; }
  #info { display:flex; justify-content:center; gap:30px; flex-wrap:wrap; margin:20px; }
  #score, #lives, #questionCounter, #timer { font-size:30px; padding:10px 20px; background:rgba(0,255,255,0.2); border-radius:15px; }
  .question-box { background:rgba(0,255,255,0.1); padding:30px; margin:30px auto; max-width:800px; border:3px solid #0ff; border-radius:20px; box-shadow:0 0 30px #0ff; }
  .options { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-top:30px; }
  .option { padding:25px; background:#001122; border:3px solid #0ff; border-radius:15px; cursor:pointer; transition:0.3s; font-size:22px; }
  .option:hover { background:#0ff; color:#000; transform:scale(1.05); box-shadow:0 0 30px #0ff; }
  .option.correct { background:#0f0 !important; color:#000; animation:correct 1s; }
  .option.wrong { background:#f00 !important; color:#fff; animation:wrong 0.6s; }
  @keyframes correct { 0%{transform:scale(1)} 50%{transform:scale(1.2)} 100%{transform:scale(1)} }
  @keyframes wrong { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-10px)} 75%{transform:translateX(10px)} }
  button { padding:15px 50px; font-size:28px; background:#0ff; color:#000; border:none; border-radius:15px; cursor:pointer; margin:20px; }
  button:hover { background:#0cc; transform:scale(1.1); }
  #gameOver, #gameComplete { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); display:none; flex-direction:column; justify-content:center; align-items:center; z-index:100; }
  #finalScore { font-size:80px; color:#0ff; text-shadow:0 0 40px #0ff; }
  .star { position:absolute; width:4px; height:4px; background:#fff; border-radius:50%; animation:fall linear infinite; }
  @keyframes fall { 0%{transform:translateY(-100vh)} 100%{transform:translateY(100vh)} }
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="game">
  <h1>CODE MASTER</h1>
  <div id="info">
    <div id="score">Score: 0</div>
    <div id="lives">Lives: 3</div>
    <div id="questionCounter">Question 1/10</div>
    <div id="timer">Time: 10</div>
  </div>

  <div class="question-box" id="questionBox">
    <h2 id="question">Ready?</h2>
    <div class="options" id="options"></div>
  </div>

  <button onclick="startGame()" id="startBtn">START GAME</button>
</div>

<div id="gameOver">
  <h1>GAME OVER</h1>
  <div id="finalScore">Score: 0</div>
  <button onclick="location.reload()">PLAY AGAIN</button>
</div>

<div id="gameComplete">
  <h1 id="endTitle">WELL DONE!</h1>
  <div id="finalScore">Score: 0</div>
  <div id="endMessage" style="font-size:40px; margin:30px;"></div>
  <button onclick="location.reload()">PLAY AGAIN</button>
</div>

<script>
// Stars background
function createStar() {
  const star = document.createElement('div');
  star.className = 'star';
  star.style.left = Math.random() * 100 + 'vw';
  star.style.animationDuration = Math.random() * 3 + 2 + 's';
  document.body.appendChild(star);
  setTimeout(() => star.remove(), 5000);
}
setInterval(createStar, 100);

// Game
let score = 0, lives = 3, currentQ = 0, timeLeft = 10, questionTimer;

const questions = [
  {q:"What does HTML stand for?", options:["Hyper Text Markup Language","Hot Mail","How To Make Lasagna"], a:0},
  {q:"Which tag makes text bold?", options:["<b>","<italic>","<big>"], a:0},
  {q:"How do you write CSS?", options:["body {color: red;}","body = color: red;","<css>red</css>"], a:0},
  {q:"Comment in CSS?", options:["/* comment */","// comment","<!-- comment -->"], a:0},
  {q:"Select by ID in CSS?", options:["#myid",".myid","myid"], a:0},
  {q:"Alert in JavaScript?", options:["alert('Hi')","msg('Hi')","print('Hi')"], a:0},
  {q:"Make a function in JS?", options:["function myFunc()","func myFunc()","create myFunc()"], a:0},
  {q:"Link CSS file?", options:["<link rel='stylesheet' href='style.css'>","<style src='style.css'>","<css>style.css</css>"], a:0},
  {q:"Change text with JS?", options:["document.getElementById('demo').innerHTML = 'Hi'","text('demo') = 'Hi'","change('demo','Hi')"], a:0},
  {q:"What is console.log() for?", options:["Debugging","Styling","Making coffee"], a:0}
];

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function startGame() {
  document.getElementById('startBtn').remove();
  score = 0; lives = 3; currentQ = 0;
  document.getElementById('score').textContent = 'Score: 0';
  document.getElementById('lives').textContent = 'Lives: 3';
  nextQuestion();
}

function nextQuestion() {
  if (currentQ >= questions.length) return completeGame();

  // Reset timer
  timeLeft = 10;
  document.getElementById('timer').textContent = 'Time: 10';
  clearInterval(questionTimer);
  questionTimer = setInterval(() => {
    timeLeft--;
    document.getElementById('timer').textContent = 'Time: ' + timeLeft;
    if (timeLeft <= 0) {
      lives--;
      document.getElementById('lives').textContent = 'Lives: ' + lives;
      if (lives <= 0) return gameOver();
      currentQ++;
      nextQuestion();
    }
  }, 1000);

  document.getElementById('questionCounter').textContent = `Question ${currentQ + 1}/${questions.length}`;

  const q = questions[currentQ];
  const allOptions = [...q.options];
  const correctAnswer = allOptions[q.a];
  const shuffled = shuffle(allOptions);

  document.getElementById('question').textContent = q.q;
  const opts = document.getElementById('options');
  opts.innerHTML = '';
  shuffled.forEach((opt) => {
    const div = document.createElement('div');
    div.className = 'option';
    div.textContent = opt;
    div.onclick = () => selectAnswer(opt === correctAnswer, div);
    opts.appendChild(div);
  });
}

function selectAnswer(isCorrect, el) {
  if (el.classList.contains('correct') || el.classList.contains('wrong')) return;

  clearInterval(questionTimer);

  if (isCorrect) {
    el.classList.add('correct');
    score += 100;
    document.getElementById('score').textContent = 'Score: ' + score;
  } else {
    el.classList.add('wrong');
    lives--;
    document.getElementById('lives').textContent = 'Lives: ' + lives;
    if (lives <= 0) return gameOver();
  }

  setTimeout(() => {
    currentQ++;
    nextQuestion();
  }, 1200);
}

function gameOver() {
  clearInterval(questionTimer);
  document.getElementById('finalScore').textContent = 'Final Score: ' + score;
  document.getElementById('gameOver').style.display = 'flex';
}

function completeGame() {
  clearInterval(questionTimer);
  document.getElementById('finalScore').textContent = 'Final Score: ' + score;

  let title = "";
  let message = "";

  if (score >= 800) {
    title = "EXCELLENT JOB!";
    message = "You're a true Code Master!";
  } else if (score >= 500) {
    title = "GOOD JOB!";
    message = "Nice! Try again to beat your score!";
  } else {
    title = "NOT BAD!";
    message = "You can do better next time!";
  }

  document.getElementById('endTitle').textContent = title;
  document.getElementById('endMessage').textContent = message;
  document.getElementById('gameComplete').style.display = 'flex';
}
</script>
</body>
</html>